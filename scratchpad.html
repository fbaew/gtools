<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scratchpad</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  html, body { height:100%; margin:0; font-family: Arial, sans-serif; background:#f3f4f6; }
  .wrapper { height:100%; display:flex; align-items:center; justify-content:center; position:relative; }
  textarea { width:80%; height:60%; font-family: monospace; font-size:1rem; padding:1rem; box-sizing:border-box; }
  #settingsToggle { position:absolute; top:10px; right:10px; font-size:1.5rem; cursor:pointer; }
  #settingsPanel { position:absolute; top:45px; right:10px; background:white; padding:1rem; box-shadow:0 2px 6px rgba(0,0,0,0.2); display:none; }
  #settingsPanel label { display:block; margin-bottom:0.5rem; }
  #settingsPanel button { margin-top:0.5rem; }
</style>
</head>
<body>
<div class="wrapper">
  <i id="settingsToggle" class="fa-solid fa-gear"></i>
  <textarea id="pad" placeholder="Start typing..."></textarea>
  <div id="settingsPanel">
    <label>Title: <input id="titleInput" type="text"></label>
    <button id="download">Download</button>
  </div>
</div>
<script>
const pad = document.getElementById('pad');
const titleInput = document.getElementById('titleInput');
const settingsToggle = document.getElementById('settingsToggle');
const settingsPanel = document.getElementById('settingsPanel');

function load(){
  pad.value = localStorage.getItem('scratchpad_content') || '';
  titleInput.value = localStorage.getItem('scratchpad_title') || 'note';
}
load();

pad.addEventListener('input', () => {
  localStorage.setItem('scratchpad_content', pad.value);
});

titleInput.addEventListener('input', () => {
  localStorage.setItem('scratchpad_title', titleInput.value);
});

settingsToggle.addEventListener('click', () => {
  settingsPanel.style.display = settingsPanel.style.display === 'block' ? 'none' : 'block';
});

document.getElementById('download').addEventListener('click', () => {
  const blob = new Blob([pad.value], {type: 'text/markdown'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  const title = titleInput.value || 'note';
  a.download = title + '.md';
  a.click();
  URL.revokeObjectURL(a.href);
});
</script>
</body>
</html>
